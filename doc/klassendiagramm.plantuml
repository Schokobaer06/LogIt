@startuml LogIt Klassen

' === BACKEND inkl. REST-API ===
package "LogIt.Core (Backend + REST API)" {
    
    class LogEntry {
        - Id: int
        - ProgramName: string
        - ProcessId: int
        - StartTime: DateTime
        - EndTime: DateTime
        - IsRunning: bool
        - TotalRunTime: TimeSpan
        + Start(): void
        + Stop(): void
        + UpdateRunTime(): void
    }

    class BackendUser {
        - role: string = "Backend"
        + InsertLog(log: LogEntry): void
        + UpdateLog(log: LogEntry): void
        + StopLog(log: LogEntry): void
    }

    class DataFetcher {
        + FetchRunningProcesses(): List<LogEntry>
    }

'    interface ILogs {
'        + Log(): void
'    }

    ' LogEntry ..|> ILogs
    DataFetcher --> LogEntry
    BackendUser --> DataFetcher

    ' REST API Controller
    class LogController {
        + POST /logs/start(log): IActionResult
        + POST /logs/stop(log): IActionResult
        + PUT /logs/update(log): IActionResult
        + GET /logs/active(): List<LogEntry>
        + GET /logs/all(): List<LogEntry>
    }

    class DatabaseManager {
        + SaveLog(log: LogEntry): void
        + UpdateLog(log: LogEntry): void
        + LoadActiveLogs(): List<LogEntry>
        + LoadAllLogs(): List<LogEntry>
        + Connect(): void
        + Disconnect(): void
    }

    LogController --> DatabaseManager
    BackendUser --> LogController
}

' === FRONTEND ===
package "LogIt.UI (Frontend)" {
    
    class MainWindow {
        - timer: Timer
        + ShowActivePrograms(): void
        + RefreshUI(): void
    }

    class FrontendUser {
        - role: string = "Frontend"
        + GetActiveLogs(): List<LogEntry>
        + GetAllLogs(): List<LogEntry>
    }

    class FrontendData {
        + FetchActiveLogs(): List<LogEntry>
        + FetchAllLogs(): List<LogEntry>
    }

    class SettingsWindow {
        + LoadSettings(): void
        + SaveSettings(): void
    }

    MainWindow --> FrontendData
    FrontendUser --> FrontendData
    SettingsWindow --> FrontendData
    FrontendData --> LogController
}

@enduml
